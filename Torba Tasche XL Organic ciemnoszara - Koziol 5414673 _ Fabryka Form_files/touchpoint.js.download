var __touchpoint=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=13)}([function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(factory){if(void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),!0,module.exports=factory(),!!0){var OldCookies=window.Cookies,api=window.Cookies=factory();api.noConflict=function(){return window.Cookies=OldCookies,api}}}((function(){function extend(){for(var i=0,result={};i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes)result[key]=attributes[key]}return result}function decode(s){return s.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function init(converter){function api(){}function set(key,value,attributes){if("undefined"!=typeof document){"number"==typeof(attributes=extend({path:"/"},api.defaults,attributes)).expires&&(attributes.expires=new Date(1*new Date+864e5*attributes.expires)),attributes.expires=attributes.expires?attributes.expires.toUTCString():"";try{var result=JSON.stringify(value);/^[\{\[]/.test(result)&&(value=result)}catch(e){}value=converter.write?converter.write(value,key):encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),key=encodeURIComponent(String(key)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var stringifiedAttributes="";for(var attributeName in attributes)attributes[attributeName]&&(stringifiedAttributes+="; "+attributeName,!0!==attributes[attributeName]&&(stringifiedAttributes+="="+attributes[attributeName].split(";")[0]));return document.cookie=key+"="+value+stringifiedAttributes}}function get(key,json){if("undefined"!=typeof document){for(var jar={},cookies=document.cookie?document.cookie.split("; "):[],i=0;i<cookies.length;i++){var parts=cookies[i].split("="),cookie=parts.slice(1).join("=");json||'"'!==cookie.charAt(0)||(cookie=cookie.slice(1,-1));try{var name=decode(parts[0]);if(cookie=(converter.read||converter)(cookie,name)||decode(cookie),json)try{cookie=JSON.parse(cookie)}catch(e){}if(jar[name]=cookie,key===name)break}catch(e){}}return key?jar[key]:jar}}return api.set=set,api.get=function(key){return get(key,!1)},api.getJSON=function(key){return get(key,!0)},api.remove=function(key,attributes){set(key,"",extend(attributes,{expires:-1}))},api.defaults={},api.withConverter=init,api}((function(){}))}))},function(module,exports,__webpack_require__){(function(global){var assign=Object.assign?Object.assign:function(obj,props1,props2,etc){for(var i=1;i<arguments.length;i++)each(Object(arguments[i]),(function(val,key){obj[key]=val}));return obj},create=function(){if(Object.create)return function(obj,assignProps1,assignProps2,etc){var assignArgsList=slice(arguments,1);return assign.apply(this,[Object.create(obj)].concat(assignArgsList))};{function F(){}return function(obj,assignProps1,assignProps2,etc){var assignArgsList=slice(arguments,1);return F.prototype=obj,assign.apply(this,[new F].concat(assignArgsList))}}}(),trim=String.prototype.trim?function(str){return String.prototype.trim.call(str)}:function(str){return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},Global="undefined"!=typeof window?window:global;function slice(arr,index){return Array.prototype.slice.call(arr,index||0)}function each(obj,fn){pluck(obj,(function(val,key){return fn(val,key),!1}))}function pluck(obj,fn){if(isList(obj)){for(var i=0;i<obj.length;i++)if(fn(obj[i],i))return obj[i]}else for(var key in obj)if(obj.hasOwnProperty(key)&&fn(obj[key],key))return obj[key]}function isList(val){return null!=val&&"function"!=typeof val&&"number"==typeof val.length}module.exports={assign:assign,create:create,trim:trim,bind:function(obj,fn){return function(){return fn.apply(obj,Array.prototype.slice.call(arguments,0))}},slice:slice,each:each,map:function(obj,fn){var res=isList(obj)?[]:{};return pluck(obj,(function(v,k){return res[k]=fn(v,k),!1})),res},pluck:pluck,isList:isList,isFunction:function(val){return val&&"[object Function]"==={}.toString.call(val)},isObject:function(val){return val&&"[object Object]"==={}.toString.call(val)},Global:Global}}).call(this,__webpack_require__(8))},function(module,exports,__webpack_require__){var engine=__webpack_require__(7),storages=[__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(12)];module.exports=engine.createStore(storages,[])},function(module,exports,__webpack_require__){const strictUriEncode=__webpack_require__(4),decodeComponent=__webpack_require__(5),splitOnFirst=__webpack_require__(6);function validateArrayFormatSeparator(value){if("string"!=typeof value||1!==value.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(value,options){return options.encode?options.strict?strictUriEncode(value):encodeURIComponent(value):value}function decode(value,options){return options.decode?decodeComponent(value):value}function removeHash(input){const hashStart=input.indexOf("#");return-1!==hashStart&&(input=input.slice(0,hashStart)),input}function extract(input){const queryStart=(input=removeHash(input)).indexOf("?");return-1===queryStart?"":input.slice(queryStart+1)}function parseValue(value,options){return options.parseNumbers&&!Number.isNaN(Number(value))&&"string"==typeof value&&""!==value.trim()?value=Number(value):!options.parseBooleans||null===value||"true"!==value.toLowerCase()&&"false"!==value.toLowerCase()||(value="true"===value.toLowerCase()),value}function parse(input,options){validateArrayFormatSeparator((options=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},options)).arrayFormatSeparator);const formatter=function(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key),key=key.replace(/\[\d*\]$/,""),result?(void 0===accumulator[key]&&(accumulator[key]={}),accumulator[key][result[1]]=value):accumulator[key]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key),key=key.replace(/\[\]$/,""),result?void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=[value]:accumulator[key]=value};case"comma":case"separator":return(key,value,accumulator)=>{const newValue="string"==typeof value&&value.split("").indexOf(options.arrayFormatSeparator)>-1?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):null===value?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{void 0!==accumulator[key]?accumulator[key]=[].concat(accumulator[key],value):accumulator[key]=value}}}(options),ret=Object.create(null);if("string"!=typeof input)return ret;if(!(input=input.trim().replace(/^[?#&]/,"")))return ret;for(const param of input.split("&")){let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=void 0===value?null:"comma"===options.arrayFormat?value:decode(value,options),formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if("object"==typeof value&&null!==value)for(const k of Object.keys(value))value[k]=parseValue(value[k],options);else ret[key]=parseValue(value,options)}return!1===options.sort?ret:(!0===options.sort?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)?result[key]=function keysSorter(input){return Array.isArray(input)?input.sort():"object"==typeof input?keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key]):input}(value):result[key]=value,result},Object.create(null))}exports.extract=extract,exports.parse=parse,exports.stringify=(object,options)=>{if(!object)return"";validateArrayFormatSeparator((options=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},options)).arrayFormatSeparator);const formatter=function(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;return void 0===value||options.skipNull&&null===value?result:null===value?[...result,[encode(key,options),"[",index,"]"].join("")]:[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>void 0===value||options.skipNull&&null===value?result:null===value?[...result,[encode(key,options),"[]"].join("")]:[...result,[encode(key,options),"[]=",encode(value,options)].join("")];case"comma":case"separator":return key=>(result,value)=>null==value||0===value.length?result:0===result.length?[[encode(key,options),"=",encode(value,options)].join("")]:[[result,encode(value,options)].join(options.arrayFormatSeparator)];default:return key=>(result,value)=>void 0===value||options.skipNull&&null===value?result:null===value?[...result,encode(key,options)]:[...result,[encode(key,options),"=",encode(value,options)].join("")]}}(options),objectCopy=Object.assign({},object);if(options.skipNull)for(const key of Object.keys(objectCopy))void 0!==objectCopy[key]&&null!==objectCopy[key]||delete objectCopy[key];const keys=Object.keys(objectCopy);return!1!==options.sort&&keys.sort(options.sort),keys.map(key=>{const value=object[key];return void 0===value?"":null===value?encode(key,options):Array.isArray(value)?value.reduce(formatter(key),[]).join("&"):encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")},exports.parseUrl=(input,options)=>({url:removeHash(input).split("?")[0]||"",query:parse(extract(input),options)}),exports.stringifyUrl=(input,options)=>{const url=removeHash(input.url).split("?")[0]||"",queryFromUrl=exports.extract(input.url),parsedQueryFromUrl=exports.parse(queryFromUrl),hash=function(url){let hash="";const hashStart=url.indexOf("#");return-1!==hashStart&&(hash=url.slice(hashStart)),hash}(input.url),query=Object.assign(parsedQueryFromUrl,input.query);let queryString=exports.stringify(query,options);return queryString&&(queryString=`?${queryString}`),`${url}${queryString}${hash}`}},function(module,exports,__webpack_require__){module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>`%${x.charCodeAt(0).toString(16).toUpperCase()}`)},function(module,exports,__webpack_require__){var singleMatcher=new RegExp("%[a-f0-9]{2}","gi"),multiMatcher=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(1===components.length)return components;split=split||1;var left=components.slice(0,split),right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){for(var tokens=input.match(singleMatcher),i=1;i<tokens.length;i++)tokens=(input=decodeComponents(tokens,i).join("")).match(singleMatcher);return input}}module.exports=function(encodedURI){if("string"!=typeof encodedURI)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`");try{return encodedURI=encodedURI.replace(/\+/g," "),decodeURIComponent(encodedURI)}catch(err){return function(input){for(var replaceMap={"%FE%FF":"��","%FF%FE":"��"},match=multiMatcher.exec(input);match;){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);result!==match[0]&&(replaceMap[match[0]]=result)}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";for(var entries=Object.keys(replaceMap),i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}(encodedURI)}}},function(module,exports,__webpack_require__){module.exports=(string,separator)=>{if("string"!=typeof string||"string"!=typeof separator)throw new TypeError("Expected the arguments to be of type `string`");if(""===separator)return[string];const separatorIndex=string.indexOf(separator);return-1===separatorIndex?[string]:[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},function(module,exports,__webpack_require__){var util=__webpack_require__(1),slice=util.slice,pluck=util.pluck,each=util.each,bind=util.bind,create=util.create,isList=util.isList,isFunction=util.isFunction,isObject=util.isObject;module.exports={createStore:createStore};var storeAPI={version:"2.0.12",enabled:!1,get:function(key,optionalDefaultValue){var data=this.storage.read(this._namespacePrefix+key);return this._deserialize(data,optionalDefaultValue)},set:function(key,value){return void 0===value?this.remove(key):(this.storage.write(this._namespacePrefix+key,this._serialize(value)),value)},remove:function(key){this.storage.remove(this._namespacePrefix+key)},each:function(callback){var self=this;this.storage.each((function(val,namespacedKey){callback.call(self,self._deserialize(val),(namespacedKey||"").replace(self._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(namespace){return this._namespacePrefix=="__storejs_"+namespace+"_"},createStore:function(){return createStore.apply(this,arguments)},addPlugin:function(plugin){this._addPlugin(plugin)},namespace:function(namespace){return createStore(this.storage,this.plugins,namespace)}};function createStore(storages,plugins,namespace){namespace||(namespace=""),storages&&!isList(storages)&&(storages=[storages]),plugins&&!isList(plugins)&&(plugins=[plugins]);var namespacePrefix=namespace?"__storejs_"+namespace+"_":"",namespaceRegexp=namespace?new RegExp("^"+namespacePrefix):null;if(!/^[a-zA-Z0-9_\-]*$/.test(namespace))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var store=create({_namespacePrefix:namespacePrefix,_namespaceRegexp:namespaceRegexp,_testStorage:function(storage){try{var testStr="__storejs__test__";storage.write(testStr,testStr);var ok=storage.read(testStr)===testStr;return storage.remove(testStr),ok}catch(e){return!1}},_assignPluginFnProp:function(pluginFnProp,propName){var oldFn=this[propName];this[propName]=function(){var args=slice(arguments,0),self=this;function super_fn(){if(oldFn)return each(arguments,(function(arg,i){args[i]=arg})),oldFn.apply(self,args)}var newFnArgs=[super_fn].concat(args);return pluginFnProp.apply(self,newFnArgs)}},_serialize:function(obj){return JSON.stringify(obj)},_deserialize:function(strVal,defaultVal){if(!strVal)return defaultVal;var val="";try{val=JSON.parse(strVal)}catch(e){val=strVal}return void 0!==val?val:defaultVal},_addStorage:function(storage){this.enabled||this._testStorage(storage)&&(this.storage=storage,this.enabled=!0)},_addPlugin:function(plugin){var self=this;if(isList(plugin))each(plugin,(function(plugin){self._addPlugin(plugin)}));else if(!pluck(this.plugins,(function(seenPlugin){return plugin===seenPlugin}))){if(this.plugins.push(plugin),!isFunction(plugin))throw new Error("Plugins must be function values that return objects");var pluginProperties=plugin.call(this);if(!isObject(pluginProperties))throw new Error("Plugins must return an object of function properties");each(pluginProperties,(function(pluginFnProp,propName){if(!isFunction(pluginFnProp))throw new Error("Bad plugin property: "+propName+" from plugin "+plugin.name+". Plugins should only return functions.");self._assignPluginFnProp(pluginFnProp,propName)}))}},addStorage:function(storage){!function(){var _console="undefined"==typeof console?null:console;_console&&(_console.warn?_console.warn:_console.log).apply(_console,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(storage)}},storeAPI,{plugins:[]});return store.raw={},each(store,(function(prop,propName){isFunction(prop)&&(store.raw[propName]=bind(store,prop))})),each(storages,(function(storage){store._addStorage(storage)})),each(plugins,(function(plugin){store._addPlugin(plugin)})),store}},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){var Global=__webpack_require__(1).Global;function localStorage(){return Global.localStorage}function read(key){return localStorage().getItem(key)}module.exports={name:"localStorage",read:read,write:function(key,data){return localStorage().setItem(key,data)},each:function(fn){for(var i=localStorage().length-1;i>=0;i--){var key=localStorage().key(i);fn(read(key),key)}},remove:function(key){return localStorage().removeItem(key)},clearAll:function(){return localStorage().clear()}}},function(module,exports,__webpack_require__){var Global=__webpack_require__(1).Global;function sessionStorage(){return Global.sessionStorage}function read(key){return sessionStorage().getItem(key)}module.exports={name:"sessionStorage",read:read,write:function(key,data){return sessionStorage().setItem(key,data)},each:function(fn){for(var i=sessionStorage().length-1;i>=0;i--){var key=sessionStorage().key(i);fn(read(key),key)}},remove:function(key){return sessionStorage().removeItem(key)},clearAll:function(){return sessionStorage().clear()}}},function(module,exports,__webpack_require__){var util=__webpack_require__(1),Global=util.Global,trim=util.trim;module.exports={name:"cookieStorage",read:function(key){if(!key||!_has(key))return null;var regexpStr="(?:^|.*;\\s*)"+escape(key).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(doc.cookie.replace(new RegExp(regexpStr),"$1"))},write:function(key,data){if(!key)return;doc.cookie=escape(key)+"="+escape(data)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},each:each,remove:remove,clearAll:function(){each((function(_,key){remove(key)}))}};var doc=Global.document;function each(callback){for(var cookies=doc.cookie.split(/; ?/g),i=cookies.length-1;i>=0;i--)if(trim(cookies[i])){var kvp=cookies[i].split("="),key=unescape(kvp[0]);callback(unescape(kvp[1]),key)}}function remove(key){key&&_has(key)&&(doc.cookie=escape(key)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function _has(key){return new RegExp("(?:^|;\\s*)"+escape(key).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(doc.cookie)}},function(module,exports){module.exports={name:"memoryStorage",read:function(key){return memoryStorage[key]},write:function(key,data){memoryStorage[key]=data},each:function(callback){for(var key in memoryStorage)memoryStorage.hasOwnProperty(key)&&callback(memoryStorage[key],key)},remove:function(key){delete memoryStorage[key]},clearAll:function(key){memoryStorage={}}};var memoryStorage={}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"is_attributed",(function(){return is_attributed})),__webpack_require__.d(__webpack_exports__,"hit",(function(){return touchpoint_hit})),__webpack_require__.d(__webpack_exports__,"get",(function(){return touchpoint_get})),__webpack_require__.d(__webpack_exports__,"isAttributed",(function(){return isAttributed})),__webpack_require__.d(__webpack_exports__,"conversion",(function(){return touchpoint_conversion})),__webpack_require__.d(__webpack_exports__,"trackPurchase",(function(){return touchpoint_trackPurchase})),__webpack_require__.d(__webpack_exports__,"createIframe",(function(){return createIframe})),__webpack_require__.d(__webpack_exports__,"getMetadata",(function(){return touchpoint_getMetadata})),__webpack_require__.d(__webpack_exports__,"_utils",(function(){return _utils})),__webpack_require__.d(__webpack_exports__,"version",(function(){return version})),__webpack_require__.d(__webpack_exports__,"forgetMe",(function(){return forgetMe}));var js_cookie=__webpack_require__(0),js_cookie_default=__webpack_require__.n(js_cookie);var cookies={set:function(name,value,minutes,domain,exclSubdomains){var expires="",baseHost="";if(minutes){var date=new Date;date.setTime(date.getTime()+60*minutes*1e3),expires=date}domain&&!exclSubdomains&&(baseHost="."+domain),js_cookie_default.a.set(name,value,{expires:expires,domain:baseHost})},get:function(name){return js_cookie_default.a.get(name)},destroy:function(name,domain,exclSubdomains){this.set(name,"",-1,domain,exclSubdomains)},parse:function(yummy,delimiter){var cookies=[],data={};if("string"==typeof yummy)cookies.push(yummy);else for(var prop in yummy)yummy.hasOwnProperty(prop)&&cookies.push(yummy[prop]);for(var i1=0;i1<cookies.length;i1++){var cookieArray=void 0;data[this.remove_prefix(cookies[i1])]={},cookieArray=this.get(cookies[i1])?this.get(cookies[i1]).split(delimiter):[];for(var i2=0;i2<cookieArray.length;i2++){var tmpArray=cookieArray[i2].split("="),resultArray=tmpArray.splice(0,1);resultArray.push(tmpArray.join("=")),data[this.remove_prefix(cookies[i1])][resultArray[0]]=resultArray[1].replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}}return data},remove_prefix:function(string){return string.replace("touchpoint_","")}},uri={parse:function(str){for(var o=this.parseOptions,m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;i--;)uri[o.key[i]]=m[i]||"";return uri[o.q.name]={},uri[o.key[12]].replace(o.q.parser,(function($0,$1,$2){$1&&(uri[o.q.name][$1]=$2)})),uri},parseOptions:{strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},getParam:function(customParams){for(var queryString={},vars=(customParams||window.location.search.substring(1)).split("&"),i=0;i<vars.length;i++){var pair=vars[i].split("=");void 0===queryString[pair[0]]?queryString[pair[0]]=pair[1]:"string"==typeof queryString[pair[0]]?queryString[pair[0]]=[queryString[pair[0]],pair[1]]:queryString[pair[0]].push(pair[1])}return queryString},getUrlParameter:function(name,query){name=name.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var results=new RegExp("[\\?&]"+name+"=([^&#]*)").exec(query);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))},getHost:function(request){return this.parse(request).host.replace("www.","")}},utils={escapeRegexp:function(string){return string.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")},extend:function(){for(var i=1;i<arguments.length;i++)for(var key in arguments[i])arguments[i].hasOwnProperty(key)&&(arguments[0][key]=arguments[i][key]);return arguments[0]},isEmptyObject:function(obj){return 0===Object.keys(obj).length&&obj.constructor===Object},isNumeric:function(v){return!isNaN(v)},isString:function(v){return"[object String]"===Object.prototype.toString.call(v)},isBool:function(v){return"[object Boolean]"===Object.prototype.toString.call(v)},isFunction:function(v){return"[object Function]"===Object.prototype.toString.call(v)},isArray:function(arg){return"[object Array]"===Object.prototype.toString.call(arg)},visibility:function(){var hidden,visibilityChange,state;return void 0!==document.hidden?(hidden="hidden",visibilityChange="visibilitychange",state="visibilityState"):void 0!==document.mozHidden?(hidden="mozHidden",visibilityChange="mozvisibilitychange",state="mozVisibilityState"):void 0!==document.msHidden?(hidden="msHidden",visibilityChange="msvisibilitychange",state="msVisibilityState"):void 0!==document.webkitHidden&&(hidden="webkitHidden",visibilityChange="webkitvisibilitychange",state="webkitVisibilityState"),{isHidden:document[hidden]||!1,state:state,hidden:hidden,visibilityChange:visibilityChange}},customEventPolyfill:function(){if("function"==typeof window.CustomEvent)return!1;function CustomEvent(event,params){params=params||{bubbles:!1,cancelable:!1,detail:void 0};var evt=document.createEvent("CustomEvent");return evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail),evt}CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent},isIframe:function(){try{return window.self!==window.top}catch(e){return!0}},detectIE:function(){var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE ");if(msie>0)return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10);if(ua.indexOf("Trident/")>0){var rv=ua.indexOf("rv:");return parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}var edge=ua.indexOf("Edge/");return edge>0&&parseInt(ua.substring(edge+5,ua.indexOf(".",edge)),10)},uuid4:function(a){return a?(a^16*Math.random()>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,this.uuid4)},ajaxGET:function(url,callback){var xhr=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),cb=this.isFunction(callback);return xhr.open("GET",url,!0),xhr.withCredentials=!0,xhr.onreadystatechange=function(){xhr.readyState>3&&cb&&callback(xhr)},xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.send(),xhr},ajaxPOST:function(url,data,success){var xhr=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),cb=this.isFunction(success);return xhr.open("POST",url,!0),xhr.onreadystatechange=function(){xhr.readyState>3&&200===xhr.status&&cb&&success(xhr.responseText)},xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.setRequestHeader("Content-Type","application/json"),xhr.send(JSON.stringify(data)),xhr}},terms={traffic:{utm:"utm",organic:"organic",referral:"referral",typein:"typein"},referer:{referral:"referral",organic:"organic",social:"social"},none:"(none)"},data={containers:{current:"touchpoint_current",first:"touchpoint_first",protection:"touchpoint_protection",uuid:"touchpoint_uuid"},delimiter:"|||",aliases:{main:{type:"typ",source:"src",medium:"mdm",campaign:"cmp",content:"cnt",term:"trm",click_id:"cid",date:"dt",url:"url",referrer:"rf"},protection:{enabled:"on",sess_id:"sess",since:"sc",till:"tl"}},pack:{main:function(tp){return data.aliases.main.type+"="+tp.type+data.delimiter+data.aliases.main.source+"="+tp.source+data.delimiter+data.aliases.main.medium+"="+tp.medium+data.delimiter+data.aliases.main.campaign+"="+tp.campaign+data.delimiter+data.aliases.main.content+"="+tp.content+data.delimiter+data.aliases.main.term+"="+tp.term+data.delimiter+data.aliases.main.click_id+"="+tp.click_id+data.delimiter+data.aliases.main.date+"="+(new Date).toISOString()+data.delimiter+data.aliases.main.url+"="+tp.url+data.delimiter+data.aliases.main.referrer+"="+tp.referrer},protection:function(since,minutes,sessionId){var till=Date.now()+60*minutes*1e3;return data.aliases.protection.sess_id+"="+sessionId+data.delimiter+data.aliases.protection.since+"="+since+data.delimiter+data.aliases.protection.till+"="+till}},unpack:{main:function(packed){return{type:packed[data.aliases.main.type]||terms.none,source:packed[data.aliases.main.source]||terms.none,medium:packed[data.aliases.main.medium]||terms.none,campaign:packed[data.aliases.main.campaign]||terms.none,content:packed[data.aliases.main.content]||terms.none,term:packed[data.aliases.main.term]||terms.none,click_id:packed[data.aliases.main.click_id]||"",date:packed[data.aliases.main.date]||"",url:packed[data.aliases.main.url]||"",referrer:packed[data.aliases.main.referrer]||""}},protection:function(packed){var now=Date.now(),since=packed[data.aliases.protection.since]||now,till=packed[data.aliases.protection.till]||now;return{enabled:till>now,sess_id:packed[data.aliases.protection.sess_id]||now,since:since||now,till:till||now}}},unwrap:function(key,packedData){var mapping={};return mapping[this.containers.current]=this.unpack.main,mapping[this.containers.first]=this.unpack.main,mapping[this.containers.protection]=this.unpack.protection,"touchpoint_uuid"===key?Object.keys(packedData)[0]:key in mapping?mapping[key](packedData):packedData},loadUnpackedData:function(container){var name=cookies.remove_prefix(container),raw=void 0!==cookies.get(container)?cookies.parse(container,this.delimiter)[name]:{};return this.unwrap(container,raw)},loadAttribution:function(){var out={};for(var key in this.containers)this.containers.hasOwnProperty(key)&&(out[key]=this.loadUnpackedData(this.containers[key]));return out}},params_params={fetch:function(prefs){var user=prefs||{},params={},defaultTTL=this.validate.checkInt(user.default_ttl);params.default_ttl=utils.isBool(defaultTTL)?30:parseInt(defaultTTL);var defaultProtectionTTL=this.validate.checkInt(user.protection_ttl);if(params.protection_ttl=utils.isBool(defaultProtectionTTL)?30:defaultProtectionTTL,params.suspend_attribution=!1,(utils.isBool(user.suspend_attribution)||utils.isFunction(user.suspend_attribution))&&(params.suspend_attribution=user.suspend_attribution),params.delay_until_visible=!utils.isBool(user.delay_until_visible)||user.delay_until_visible,params.delay_until_interacted=!utils.isBool(user.delay_until_interacted)||user.delay_until_interacted,params.delay_attribution=!utils.isBool(user.delay_attribution)||user.delay_attribution,params.click_id_param=user.click_id_param||"click_id",user.typein_attributes&&user.typein_attributes.source&&user.typein_attributes.medium?(params.typein_attributes={},params.typein_attributes.source=user.typein_attributes.source,params.typein_attributes.medium=user.typein_attributes.medium):params.typein_attributes={source:"(direct)",medium:"(none)"},params.referrals=[],user.referrals&&user.referrals.length>0)for(var ir=0;ir<user.referrals.length;ir++)user.referrals[ir].host&&params.referrals.push(user.referrals[ir]);if(params.referrals.push({host:"t.co",display:"twitter.com"}),params.referrals.push({host:"plus.url.google.com",display:"plus.google.com"}),params.organics=[],user.organics&&user.organics.length>0)for(var io=0;io<user.organics.length;io++)user.organics[io].host&&user.organics[io].param&&params.organics.push(user.organics[io]);params.organics.push({host:"bing.com",param:"q",display:"bing"}),params.organics.push({host:"yahoo.com",param:"p",display:"yahoo"}),params.organics.push({host:"about.com",param:"q",display:"about"}),params.organics.push({host:"aol.com",param:"q",display:"aol"}),params.organics.push({host:"ask.com",param:"q",display:"ask"}),params.organics.push({host:"globososo.com",param:"q",display:"globo"}),params.organics.push({host:"go.mail.ru",param:"q",display:"go.mail.ru"}),params.organics.push({host:"rambler.ru",param:"query",display:"rambler"}),params.organics.push({host:"tut.by",param:"query",display:"tut.by"}),params.organics.push({host:"szukaj.onet.pl",param:"qt",display:"szukaj.onet.pl"}),params.organics.push({host:"szukaj.wp.pl",param:"q",display:"szukaj.wp.pl"}),params.organics.push({host:"szukaj.interia.pl",param:"q",display:"szukaj.interia.pl"}),user.domain&&utils.isString(user.domain)?params.domain={host:user.domain,isolate:!1}:user.domain&&user.domain.host?params.domain=user.domain:params.domain={host:uri.getHost(document.location.hostname),isolate:!1},params.source_param=user.source_param||"utm_source",params.medium_param=user.medium_param||"utm_medium",params.campaign_param=user.campaign_param||"utm_campaign",params.content_param=user.content_param||"utm_content",params.term_param=user.term_param||"utm_term",params.channels=[];var __channels={convertiser:{label:"convertiser",priority:10,ttl:params.default_ttl,protection_ttl:params.protection_ttl}};if(user.channels&&user.channels.length>0)for(var ix=0;ix<user.channels.length;ix++)utils.isString(user.channels[ix].label)&&!1!==this.validate.checkInt(user.channels[ix].priority)&&(__channels[user.channels[ix].label]={label:user.channels[ix].label,priority:user.channels[ix].priority,ttl:this.validate.checkInt(user.channels[ix].ttl),protection_ttl:this.validate.checkInt(user.channels[ix].protection_ttl)});if(!utils.isEmptyObject(__channels))for(var item in __channels)__channels.hasOwnProperty(item)&&params.channels.push({label:__channels[item].label,priority:__channels[item].priority,ttl:__channels[item].ttl,protection_ttl:__channels[item].protection_ttl});return params},validate:{checkFloat:function(v){return!!utils.isNumeric(parseFloat(v))&&parseFloat(v)},checkInt:function(v){return!!utils.isNumeric(parseInt(v))&&parseInt(v)}}},init={attributed:!1,interacted:!1,run:function(prefs){var __tpType,__tpSource,__tpMedium,__tpCampaign,__tpContent,__tpTerm,__tpClickId,p=params_params.fetch(prefs),getParam=uri.getParam(),domain=p.domain.host,isolate=p.domain.isolate,uuid=cookies.get(data.containers.uuid);void 0===uuid&&(uuid=utils.uuid4(),cookies.set(data.containers.uuid,uuid,2628e3,domain,isolate));var inPopup=!1===utils.detectIE()&&!1===window.menubar.visible,inIframe=utils.isIframe(),isIE=!1!==utils.detectIE(),currentHit=function(){var firstHit=data.loadUnpackedData(data.containers.first),lastHit=data.loadUnpackedData(data.containers.current);if(void 0!==getParam[p.source_param]||void 0!==getParam[p.medium_param]||void 0!==getParam[p.campaign_param]||void 0!==getParam[p.content_param]||void 0!==getParam[p.term_param]||void 0!==getParam.gclid||void 0!==getParam.yclid)return formatAttribution(terms.traffic.utm);if(checkReferer(terms.traffic.organic))return formatAttribution(terms.traffic.organic);if(checkReferer(terms.traffic.referral))return formatAttribution(terms.traffic.referral);if("(none)"===firstHit.source&&"(none)"===lastHit.source||lastHit.source===p.typein_attributes.source)return formatAttribution(terms.traffic.typein);var ttl=p.default_ttl;if(isChannel(lastHit)){var channel=getChannel(lastHit.source);channel.ttl=params_params.validate.checkInt(channel.ttl),channel.ttl&&(ttl=parseInt(channel.ttl))}var updated={ttl:ttl};return lastHit=utils.extend(lastHit,updated)}(),currentAttribution=data.loadAttribution(),eventMeta={uuid:uuid,in_popup:inPopup,in_iframe:inIframe,is_ie:isIE,ref:document.referrer,ua:window.navigator.userAgent,sh:window.screen.height,sw:window.screen.width,wh:window.screen.availHeight,ww:window.screen.availWidth,hit:currentHit,is_channel:isChannel(currentHit),in_session:currentAttribution.protection.enabled};function formatAttribution(type){var ttl=p.default_ttl;switch(type){case terms.traffic.utm:if(__tpType=terms.traffic.utm,__tpSource=void 0!==getParam[p.source_param]?getParam[p.source_param]:void 0!==getParam.gclid?"google":void 0!==getParam.yclid?"yandex":terms.none,__tpMedium=void 0!==getParam[p.medium_param]?getParam[p.medium_param]:void 0!==getParam.gclid?"cpc":void 0!==getParam.yclid?"cpc":terms.none,__tpCampaign=void 0!==getParam[p.campaign_param]?getParam[p.campaign_param]:void 0!==getParam.gclid?"google_cpc":void 0!==getParam.yclid?"yandex_cpc":terms.none,__tpContent=void 0!==getParam[p.content_param]?getParam[p.content_param]:terms.none,__tpTerm=void 0!==getParam[p.term_param]?getParam[p.term_param]:function(){var referrer=document.referrer;if(!(referrer&&uri.parse(referrer).host&&uri.parse(referrer).host.match(/^(?:.*\.)?yandex\..{2,9}$/i)))return!1;try{return uri.getParam(uri.parse(document.referrer).query).text}catch(err){return!1}}()||terms.none,__tpClickId=(getParam[p.click_id_param]||"").substring(0,256),isChannel({source:__tpSource,type:terms.traffic.utm})){var channel=getChannel(__tpSource);channel.ttl=params_params.validate.checkInt(channel.ttl),channel.ttl&&(ttl=parseInt(channel.ttl))}break;case terms.traffic.organic:__tpType=terms.traffic.organic,__tpSource=__tpSource||uri.getHost(document.referrer),__tpMedium=terms.referer.organic,__tpCampaign=terms.none,__tpContent=terms.none,__tpTerm=terms.none,__tpClickId="";break;case terms.traffic.referral:__tpType=terms.traffic.referral,__tpSource=__tpSource||uri.getHost(document.referrer),__tpMedium=__tpMedium||terms.referer.referral,__tpCampaign=terms.none,__tpContent=uri.parse(document.referrer).path,__tpTerm=terms.none,__tpClickId="";break;case terms.traffic.typein:__tpType=terms.traffic.typein,__tpSource=p.typein_attributes.source,__tpMedium=p.typein_attributes.medium,__tpCampaign=terms.none,__tpContent=terms.none,__tpTerm=terms.none,__tpClickId="";break;default:__tpType=terms.none,__tpSource=terms.none,__tpMedium=terms.none,__tpCampaign=terms.none,__tpContent=terms.none,__tpTerm=terms.none,__tpClickId=""}return{type:__tpType,source:__tpSource,medium:__tpMedium,campaign:__tpCampaign,content:__tpContent,term:__tpTerm,click_id:__tpClickId,date:(new Date).toISOString(),url:document.location.href,referrer:document.referrer||terms.none,ttl:ttl}}function checkReferer(type){var referer=document.referrer;switch(type){case terms.traffic.organic:return!!referer&&checkRefererHost(referer)&&function(referer){var yHostRegex=new RegExp("^(?:.*\\.)?"+utils.escapeRegexp("yandex")+"\\..{2,9}$"),yParamRegex=new RegExp(".*"+utils.escapeRegexp("text")+"=.*"),gHostRegex=new RegExp("^(?:www\\.)?"+utils.escapeRegexp("google")+"\\..{2,9}$");if(uri.parse(referer).query&&uri.parse(referer).host.match(yHostRegex)&&uri.parse(referer).query.match(yParamRegex))return __tpSource="yandex",!0;if(uri.parse(referer).host.match(gHostRegex))return __tpSource="google",!0;if(!uri.parse(referer).query)return!1;for(var i=0;i<p.organics.length;i++){if(uri.parse(referer).host.match(new RegExp("^(?:.*\\.)?"+utils.escapeRegexp(p.organics[i].host)+"$","i"))&&uri.parse(referer).query.match(new RegExp(".*"+utils.escapeRegexp(p.organics[i].param)+"=.*","i")))return __tpSource=p.organics[i].display||p.organics[i].host,!0;if(i+1===p.organics.length)return!1}}(referer);case terms.traffic.referral:return!!referer&&checkRefererHost(referer)&&function(referer){if(!(p.referrals.length>0))return __tpSource=uri.getHost(referer),!0;for(var i=0;i<p.referrals.length;i++){if(uri.parse(referer).host.match(new RegExp("^(?:.*\\.)?"+utils.escapeRegexp(p.referrals[i].host)+"$","i")))return __tpSource=p.referrals[i].display||p.referrals[i].host,__tpMedium=p.referrals[i].medium||terms.referer.referral,!0;if(i+1===p.referrals.length)return __tpSource=uri.getHost(referer),!0}}(referer);default:return!1}}function checkRefererHost(referer){if(p.domain){if(isolate)return uri.getHost(referer)!==uri.getHost(domain);var hostRegex=new RegExp("^(?:.*\\.)?"+utils.escapeRegexp(domain)+"$","i");return!uri.getHost(referer).match(hostRegex)}return uri.getHost(referer)!==uri.getHost(document.location.href)}function isChannel(hit){return hit.type===terms.traffic.utm&&null!==getChannel(hit.source)}function getChannel(label){if(label=label.toLowerCase(),p.channels.length>0)for(var i=0;i<p.channels.length;i++)if(p.channels[i].label.toLowerCase()===label)return p.channels[i];return null}function saveAttribution(){var attributedHit=function(){var firstHit=data.loadUnpackedData(data.containers.first),lastHit=data.loadUnpackedData(data.containers.current),suspendAttribution=utils.isFunction(p.suspend_attribution)?p.suspend_attribution():p.suspend_attribution;if(inIframe||inPopup)return lastHit;if(suspendAttribution)return lastHit;if(currentAttribution.protection.enabled)return lastHit;switch(currentHit.type){case terms.traffic.utm:if(!utils.isEmptyObject(lastHit))if(isChannel(lastHit)&&isChannel(currentHit)){var lastChannel=getChannel(lastHit.source),currentChannel=getChannel(currentHit.source);if(lastHit.priority=lastChannel.priority,currentHit.priority=currentChannel.priority,prefs&&utils.isFunction(prefs.on_priority_check)&&prefs.on_priority_check(lastHit,currentHit),lastHit.priority>currentHit.priority)return lastHit}else if(isChannel(lastHit)&&!isChannel(currentHit))return lastHit;lastHit=currentHit;break;case terms.traffic.organic:case terms.traffic.referral:isChannel(lastHit)||(lastHit=currentHit);break;case terms.traffic.typein:"(none)"===firstHit.source&&"(none)"===lastHit.source&&(lastHit=currentHit)}return lastHit}(),protectionTTL=p.protection_ttl,protectionSessId=currentAttribution.protection.sess_id,protectionSince=currentAttribution.protection.since,attributionTTL=1440*currentHit.ttl,now=Date.now();if(cookies.set(data.containers.current,data.pack.main(attributedHit),attributionTTL,domain,isolate),void 0===cookies.get(data.containers.first)&&cookies.set(data.containers.first,data.pack.main(attributedHit),attributionTTL,domain,isolate),isChannel(attributedHit)){var channel=getChannel(attributedHit.source);channel.protection_ttl=params_params.validate.checkInt(channel.protection_ttl),!1!==channel.protection_ttl&&(protectionTTL=channel.protection_ttl)}(protectionTTL<=0||!currentAttribution.protection.enabled)&&(protectionSessId=now,protectionSince=now),cookies.set(data.containers.protection,data.pack.protection(protectionSince,protectionTTL,protectionSessId),525600,domain,isolate),init.attributed=!0,document.dispatchEvent(new CustomEvent("touchpoint.attribution_completed",{detail:utils.extend(eventMeta,{attribution:data.loadAttribution()})}))}function applyAttribution(){var timeout=p.delay_attribution?3e3:0;setTimeout((function(){p.delay_until_interacted?init.interacted?saveAttribution():setTimeout(applyAttribution,500):saveAttribution()}),timeout)}function onPageVisible(e){utils.visibility().isHidden||(e.target.removeEventListener(e.type,onPageVisible),applyAttribution())}function onUserInteraction(){init.interacted=!0,document.removeEventListener("mousedown",onUserInteraction),document.removeEventListener("mousemove",onUserInteraction),document.removeEventListener("touchstart",onUserInteraction),document.removeEventListener("keydown",onUserInteraction),document.removeEventListener("scroll",onUserInteraction)}document.dispatchEvent(new CustomEvent("touchpoint.attribution_initialized",{detail:utils.extend(eventMeta,{attribution:currentAttribution})})),p.delay_until_interacted&&(document.addEventListener("mousedown",onUserInteraction),document.addEventListener("mousemove",onUserInteraction),document.addEventListener("touchstart",onUserInteraction),document.addEventListener("keydown",onUserInteraction),document.addEventListener("scroll",onUserInteraction)),p.delay_until_visible&&utils.visibility().isHidden?document.addEventListener(utils.visibility().visibilityChange,onPageVisible):applyAttribution()}},query_string=__webpack_require__(3),query_string_default=__webpack_require__.n(query_string),store_modern=__webpack_require__(2),store_modern_default=__webpack_require__.n(store_modern);function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var validator=params_params.validate,tracker={STORED_GUID_KEY:"convertiser_guid",createIframe:function(src){var iframe=document.createElement("iframe");iframe.setAttribute("src",src),iframe.setAttribute("frameborder","0"),iframe.setAttribute("scrolling","no"),iframe.style.width="1px",iframe.style.height="1px";var stateCheck=setInterval((function(){"complete"===document.readyState&&(clearInterval(stateCheck),document.body.appendChild(iframe))}),100)},getMetadata:function(url,key){key=key||"cvrid";var query=uri.parse(url).query,value=uri.getUrlParameter(key,query);return(value=value.trim().split(".")).length<5?{}:{publisher_id:validator.checkInt(value[1])||0,publisher_subid:value[2]?value[2].trim():null,adspace_id:value[3]?value[3].trim():null,adspace_type:value[4]?value[4].trim():null,source_type:value[5]?value[5].trim():null,guid:value[6]?value[6].trim():null}},isValidGUID:function(guid){return!(!utils.isString(guid)||32!==guid.length)},conversion:function(_conversion){var src="https://converti.se/conversion/",lastHit=data.loadUnpackedData(data.containers.current),meta=tracker.getMetadata(lastHit.url),defaults={guid:"",goal_id:"",order_id:"",order_amount:0,publisher_id:0,publisher_subid:""};if("convertiser"===lastHit.source&&utils.isString(lastHit.click_id)&&32===lastHit.click_id.length&&(defaults.guid=lastHit.click_id),tracker.isValidGUID(meta.guid)&&(defaults.guid=meta.guid),tracker.isValidGUID(defaults.guid)||(defaults.guid=tracker.getStoredGUID()),(_conversion=utils.extend(defaults,_conversion)).publisher_id=validator.checkInt(_conversion.publisher_id)||0,_conversion.publisher_subid=utils.isString(_conversion.publisher_subid)?encodeURIComponent(_conversion.publisher_subid.trim()):"",_conversion.order_amount=validator.checkFloat(_conversion.order_amount)||0,_conversion.order_id=utils.isString(_conversion.order_id)?encodeURIComponent(_conversion.order_id.trim()):"",utils.isArray(_conversion.goal_id)){src+="?tracking_id="+_conversion.order_id;for(var i=0,len=_conversion.goal_id.length;i<len;i++)src+="&goal="+_conversion.goal_id[i]}else src+=_conversion.goal_id+"/?sale_amount="+_conversion.order_amount+"&tracking_id="+_conversion.order_id;_conversion.publisher_id&&(src+="&publisher_id="+_conversion.publisher_id),_conversion.publisher_subid&&(src+="&publisher_subid="+_conversion.publisher_subid),_conversion.guid&&(src+="&guid="+_conversion.guid),tracker.createIframe(src)},getStoredGUID:function(){var values=[];values.push(js_cookie_default.a.get(tracker.STORED_GUID_KEY)),values.push(store_modern_default.a.get(tracker.STORED_GUID_KEY));for(var _i=0,_values=values;_i<_values.length;_i++){var guid=_values[_i];if(tracker.isValidGUID(guid))return guid}return null},setStoredGUID:function(guid){tracker.isValidGUID(guid)&&(js_cookie_default.a.set(tracker.STORED_GUID_KEY,guid,{expires:730}),store_modern_default.a.set(tracker.STORED_GUID_KEY,guid))},deleteStoredGUID:function(){js_cookie_default.a.remove(tracker.STORED_GUID_KEY),store_modern_default.a.remove(tracker.STORED_GUID_KEY)},updateGUID:function(){var request=tracker.getMetadata(window.location.href);request.hasOwnProperty("guid")?tracker.setStoredGUID(request.guid):tracker.setStoredGUID(tracker.getStoredGUID()),!window.location.href.includes("convertiser")&&!window.location.href.includes("cvrid=")||tracker.getStoredGUID()||utils.ajaxGET("https://converti.se/session/",(function(req){if(200===req.status){var guid=req.responseText;tracker.isValidGUID(guid)&&tracker.setStoredGUID(guid)}}))},trackEvent:function(event){var url="https://converti.se/event/";if(["Purchase","PageView"].includes(event.type))if(event.offer_id=utils.isString(event.offer_id)?encodeURIComponent(event.offer_id.trim()):"",""!==event.offer_id){var defaults={referrer:document.referrer,url:document.location.href,date:Date.now()};if(!event.hasOwnProperty("guid")){var guid=tracker.getStoredGUID();null!==guid&&(event.guid=guid)}if(event=utils.extend(event,defaults),navigator.sendBeacon)!function(){for(var formData=new FormData,_loop=function(){var _Object$entries$_i=_slicedToArray(_Object$entries[_i2],2),key=_Object$entries$_i[0],val=_Object$entries$_i[1];utils.isArray(val)?val.forEach((function(v){formData.append("".concat(key,"[]"),v)})):formData.append(key,val)},_i2=0,_Object$entries=Object.entries(event);_i2<_Object$entries.length;_i2++)_loop();navigator.sendBeacon(url,formData)}();else{var eventData=query_string_default.a.stringify(event,{arrayFormat:"bracket"});(new Image).src="".concat(url,"?").concat(eventData)}}else console.warn("Event Tracking: Missing Offer ID");else console.warn("Event Tracking: Unknown event type: "+event.type)},trackPurchase:function(event){(event=utils.extend({order_id:"",order_amount:0,order_items:[]},event)).type="Purchase",event.order_id=utils.isString(event.order_id)?encodeURIComponent(event.order_id.trim()):"",""!==event.order_id?(event.order_amount=validator.checkFloat(event.order_amount)||0,0!==event.order_amount?(utils.isArray(event.order_items)||(event.order_items=[]),tracker.trackEvent(event)):console.warn("Event Tracking: Order amount cannot be 0")):console.warn("Event Tracking: Missing Order ID")}};function is_attributed(){return init.attributed}function touchpoint_hit(prefs){init.run(prefs)}function touchpoint_get(){return data.loadAttribution()}utils.customEventPolyfill(),tracker.updateGUID();var isAttributed=is_attributed,touchpoint_conversion=tracker.conversion,touchpoint_trackPurchase=tracker.trackPurchase,createIframe=tracker.createIframe,touchpoint_getMetadata=tracker.getMetadata,_utils=utils,version="1.15.2",forgetMe=tracker.deleteStoredGUID,commands={hit:touchpoint_hit,conversion:touchpoint_conversion,trackPurchase:touchpoint_trackPurchase,createIframe:createIframe,forgetMe:forgetMe,is_attributed:is_attributed,isAttributed:isAttributed,getAttribution:touchpoint_get,getMetadata:touchpoint_getMetadata,version:version,push:function(){var command=Array.from(arguments),fn=command.slice(0,1).toString(),args=command.slice(1);if(Object.keys(commands).includes(fn))return utils.isFunction(commands[fn])?commands[fn].apply(void 0,args):commands[fn]}};if(window.TouchPointObject){var handler=window[window.TouchPointObject];utils.isArray(handler.q)&&handler.q.forEach((function(cmd){commands.push.apply(void 0,cmd)})),window[window.TouchPointObject]=commands.push.bind(void 0)}document.dispatchEvent(new CustomEvent("touchpoint.ready"))}]);
//# sourceMappingURL=/static/tracker/touchpoint.js.map
